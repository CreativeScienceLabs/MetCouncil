window.Sticksy=function(){"use strict";var n="static",e="fixed";function r(t,e){if(!t)throw new Error("You have to specify the target element");if("string"!=typeof t&&!(t instanceof Element))throw new Error("Expected a string or element, but got: "+Object.prototype.toString.call(t));var i=a.findElement(t);if(!i)throw new Error("Cannot find target element: "+t);var n=i.parentNode;if(!n)throw new Error("Cannot find container of target element: "+t);this.t={containerEl:n,targetEl:i,topSpacing:(e=e||{}).topSpacing||0,enabled:e.enabled||!0,listen:e.listen||!1},this.onStateChanged=null,this.nodeRef=i,this.i()}r.instances=[],r.enabledInstances=[],r.prototype.i=function(){var t=this;this.state=n,this.o=[],this.h=[];for(var e=this.t.targetEl;e;){var i=e.cloneNode(!0);i.style.visibility="hidden",i.style.pointerEvents="none",i.className+=" sticksy-dummy-node",i.removeAttribute("id"),this.t.targetEl.parentNode.insertBefore(i,this.t.targetEl),this.o.push(e),this.h.push(i),e=e.nextElementSibling}this.u=0,this.l={top:0,bottom:0},this.v=!1,this.t.containerEl.style.position="relative",this.m=-1===getComputedStyle(this.t.containerEl).display.indexOf("flex"),this.t.listen&&(this.p=new MutationObserver(function(){t.hardRefresh()}),this.g()),r.instances.push(this),this.t.enabled&&r.enabledInstances.push(this),this.hardRefresh()},r.prototype.g=function(){this.t.listen&&!this.v&&(this.p.observe(this.t.containerEl,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),this.v=!0)},r.prototype.C=function(){this.t.listen&&this.v&&(this.p.disconnect(),this.v=!1)},r.prototype.M=function(t){return t<this.l.top?n:t>=this.l.bottom?"stuck":e},r.prototype.S=function(){this.u=a.getComputedBox(this.o[this.o.length-1]).bottomWithMargin-a.getComputedBox(this.o[0]).topWithMargin},r.prototype.j=function(){var t=this.t.containerEl,e=this.o,t=a.getComputedBox(t),e=a.getComputedBox(e[0]);this.l={top:e.topWithMargin-this.t.topSpacing,bottom:t.bottom-t.paddingBottom-this.t.topSpacing-this.u}},r.prototype.B=function(t){t===n?(this.P(this.o),this.T(this.h)):(this.k(this.o),t===e?this.O(this.o):this.W(this.o),this.D(this.h))},r.prototype.refresh=function(){var t=this.M(window.pageYOffset,this.l);t!==this.state&&(this.state=t,this.C(),this.B(t),this.g(),"function"==typeof this.onStateChanged&&this.onStateChanged(t))},r.prototype.hardRefresh=function(){this.C();var t=this.state;this.state=n,this.B(this.state),this.k(this.o),this.S(),this.j(),this.state=this.M(window.pageYOffset,this.l),this.B(this.state),this.g(),"function"==typeof this.onStateChanged&&t!==this.state&&this.onStateChanged(this.state)},r.prototype.enable=function(){this.t.enabled=!0,r.enabledInstances.push(this),this.hardRefresh()},r.prototype.disable=function(){this.t.enabled=!1,this.state=n,this.B(this.state),r.enabledInstances.splice(r.enabledInstances.indexOf(this),1)},r.prototype.O=function(t){for(var e=0,i=this.t.topSpacing,n=0;n<t.length;n++){var o=t[n],s=a.getComputedBox(o),r=this.m?Math.max(0,e-s.marginTop):e;o.style.position="fixed",o.style.top=i+r+"px",o.style.bottom="",i+=s.height+s.marginTop+r,e=s.marginBottom}},r.prototype.W=function(t){for(var e=0,i=a.getComputedBox(this.t.containerEl).paddingBottom,n=t.length-1;0<=n;n--){var o=t[n],s=a.getComputedBox(o),r=this.m?Math.max(0,e-s.marginBottom):e;o.style.position="absolute",o.style.top="auto",o.style.bottom=i+r+"px",i+=s.height+s.marginBottom+r,e=s.marginTop}},r.prototype.P=function(t){t.forEach(function(t){t.style.position="",t.style.top="",t.style.bottom="",t.style.height="",t.style.width=""})},r.prototype.T=function(t){t.forEach(function(t){t.style.display="none"})},r.prototype.D=function(t){for(var e=0;e<t.length;e++)t[e].style.display=getComputedStyle(this.o[e]).display},r.prototype.k=function(){for(var t=0;t<this.o.length;t++){var e=this.o[t],i=getComputedStyle(e);e.style.width=i.width,e.style.height=i.height}},r.refreshAll=function(){for(var t=0;t<r.enabledInstances.length;t++)r.enabledInstances[t].refresh()},r.hardRefreshAll=function(){for(var t=0;t<r.enabledInstances.length;t++)r.enabledInstances[t].hardRefresh()},r.enableAll=function(){r.enabledInstances=r.instances.slice(),this.hardRefreshAll()},r.disableAll=function(){for(var t=r.enabledInstances.slice(),e=0;e<t.length;e++)r.enabledInstances[e].disable();r.enabledInstances=[]},r.initializeAll=function(t,e,i){if(void 0===t)throw new Error("'target' parameter is undefined");var n=[];t instanceof Element?n=[t]:void 0!==t.length&&0<t.length&&t[0]instanceof Element?n="function"==typeof t.get?t.get():t:"string"==typeof t&&(n=document.querySelectorAll(t)||[]);var o=[],s=[];if(n.forEach(function(t){-1===o.indexOf(t.parentNode)&&(o.push(t.parentNode),s.push(t))}),!i&&!s.length)throw new Error("There are no elements to initialize");return s.map(function(t){return new r(t,e)})},window.addEventListener("scroll",r.refreshAll),window.addEventListener("resize",r.hardRefreshAll);var a={parseNumber:function(t){return parseFloat(t)||0},findElement:function(t,e){return e=e||document,"string"==typeof t?e.querySelector(t):t instanceof Element?t:void 0},getComputedBox:function(t){var e=t.getBoundingClientRect(),t=getComputedStyle(t);return{height:e.height,width:e.width,top:window.pageYOffset+e.top,bottom:window.pageYOffset+e.bottom,marginTop:a.parseNumber(t.marginTop),marginBottom:a.parseNumber(t.marginBottom),paddingTop:a.parseNumber(t.paddingTop),paddingBottom:a.parseNumber(t.paddingBottom),topWithMargin:window.pageYOffset+e.top-a.parseNumber(t.marginTop),bottomWithMargin:window.pageYOffset+e.bottom+a.parseNumber(t.marginBottom)}}};return r}();var jQueryPlugin=window.$||window.jQuery||window.Zepto;jQueryPlugin&&(jQueryPlugin.fn.sticksy=function(t){return window.Sticksy.initializeAll(this,t)});